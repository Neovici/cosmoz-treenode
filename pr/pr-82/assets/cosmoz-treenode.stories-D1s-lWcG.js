var bt=Object.defineProperty;var gt=(s,t,e)=>t in s?bt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>gt(s,typeof t!="symbol"?t+"":t,e);import{B as Pt,x as St}from"./lit-html-DLYuhZ0i.js";const _t=(s,t)=>{const e=h=>h===void 0,r=h=>h,n=s.filter(e).length,o=t.filter(e).length,i=s.filter(r).length,c=t.filter(r).length;return n<o?-1:n>o||i<c?1:i>c?-1:0};class kt{constructor(t,e={}){a(this,"_treeData");a(this,"_roots");a(this,"childProperty");a(this,"searchProperty");a(this,"pathLocatorSeparator");a(this,"pathStringSeparator");this._treeData=t,this._roots=Object.values(t),this.pathLocatorSeparator=e.pathLocatorSeparator||".",this.pathStringSeparator=e.pathStringSeparator||"/",this.childProperty=e.childProperty||"children",this.searchProperty=e.searchProperty||"name"}getNodeByProperty(t,e=this.searchProperty,r=this._roots){if(t!==void 0)return this.findNode(t,e,r)}searchNodes(t,e,r,n=this.searchProperty){const o={propertyName:n,exact:r!==void 0?r:!0,firstHitOnly:!1};return this._searchNodes(t,o,e)}findNode(t,e=this.searchProperty,r){const n={propertyName:e,exact:!0,firstHitOnly:!0};return this._searchNodes(t,n,r).shift()}_searchNodes(t,e,r=this._roots){const n=[];for(const o of r){const i=this.search(o,t,e);if(e.firstHitOnly&&i.length>0)return i;n.push(...i)}return n}getNodeByPathLocator(t,e=this._treeData,r=this.pathLocatorSeparator){return t?this.getPathNodes(t,e,r).pop():this._roots}getPathNodes(t,e=this._treeData,r=this.pathLocatorSeparator){return t?Object.keys(e).map(n=>{const o={};return o[n]=e[n],this._getPathNodes(t,o,r)}).filter(n=>n&&n.length>0).sort(_t)[0]:e}_getPathNodes(t,e=this._treeData,r=this.pathLocatorSeparator){const n=t.split(r),o=this._pathToNodes(n,e,r);for(;o.length>0&&o[0]===void 0;)o.shift();return o}_pathToNodes(t,e,r){let n=e;return t.map((o,i)=>{if(!n)return;const c=n[o]??n[t.slice(0,i+1).join(r)];return c&&(n=c[this.childProperty]),c})}getPathString(t,e=this.searchProperty,r=this.pathStringSeparator,n=this.pathLocatorSeparator){const o=this.getPathNodes(t,this._treeData,n);if(Array.isArray(o))return o.filter(i=>i!=null).map(i=>i[e]).join(r)}getPathStringByProperty(t,e=this.searchProperty,r=this.searchProperty,n=this.pathStringSeparator,o=this.pathLocatorSeparator){if(t===void 0)return;if(e==="pathLocator")return this.getPathString(t,r,n,o);const i=this.getNodeByProperty(t,e);if(i){const c=i.pathLocator||i.path;return this.getPathString(c,r,n)}}getChildren(t){return!t||!t[this.childProperty]?[]:Object.values(t[this.childProperty])}hasChildren(t){if(!t)return!1;const e=t[this.childProperty];if(!e)return!1;for(const r in e)return!0;return!1}getProperty(t,e){if(!(!t||!e))return t[e]}nodeConformsSearch(t,e,r){const n=r?t[r.propertyName]:void 0;if(!n){console.error("options.propertyName needs to be specified.");return}if(r!=null&&r.exact)return n===e;if(e===void 0)return!1;const o=n.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toUpperCase(),i=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toUpperCase();return o.indexOf(i)>-1}search(t,e,r,n=[]){const o=this.nodeConformsSearch(t,e,r),i=this.getChildren(t);o&&n.push(t);for(const c of i){const h=this.search(c,e,r,n);if(!Array.isArray(h))return[h]}return n}}const vt={1:{id:"11111111-1111-1111-1111-111111111111",name:"Manufacturers",pathLocator:"1",children:{2:{id:"22222222-2222-2222-2222-222222222222",name:"Okinawa",pathLocator:"1.2",children:{3:{id:"f7a21733-0e65-4985-9e40-a4fb00f3124f",name:"Yamaha Nippon",pathLocator:"1.2.3",children:{}}}},4:{id:"44444444-4444-4444-4444-444444444444",name:"Senkaku",pathLocator:"1.4",children:{5:{id:"fc78989a-d213-496c-80db-a4fb00f31252",name:"Mitsubishi Heavy Industries",pathLocator:"1.4.5",children:{}}}}}}};let A,ht=0;function M(s){A=s}function R(){A=null,ht=0}function wt(){return ht++}const T=Symbol("haunted.phase"),E=Symbol("haunted.hook"),F=Symbol("haunted.update"),j=Symbol("haunted.commit"),m=Symbol("haunted.effects"),_=Symbol("haunted.layoutEffects"),D="haunted.context";var U,W,I;I=E,W=m,U=_;class Nt{constructor(t,e){a(this,"update");a(this,"host");a(this,"virtual");a(this,I);a(this,W);a(this,U);this.update=t,this.host=e,this[E]=new Map,this[m]=[],this[_]=[]}run(t){M(this);let e=t();return R(),e}_runEffects(t){let e=this[t];M(this);for(let r of e)r.call(this);R()}runEffects(){this._runEffects(m)}runLayoutEffects(){this._runEffects(_)}teardown(){this[E].forEach(e=>{typeof e.teardown=="function"&&e.teardown(!0)})}}const xt=Promise.resolve().then.bind(Promise.resolve());function dt(){let s=[],t;function e(){t=null;let r=s;s=[];for(var n=0,o=r.length;n<o;n++)r[n]()}return function(r){s.push(r),t==null&&(t=xt(e))}}const Ct=dt(),z=dt();var Q;Q=T;class Et{constructor(t,e){a(this,"renderer");a(this,"host");a(this,"state");a(this,Q);a(this,"_updateQueued");this.renderer=t,this.host=e,this.state=new Nt(this.update.bind(this),e),this[T]=null,this._updateQueued=!1}update(){this._updateQueued||(Ct(()=>{let t=this.handlePhase(F);z(()=>{this.handlePhase(j,t),z(()=>{this.handlePhase(m)})}),this._updateQueued=!1}),this._updateQueued=!0)}handlePhase(t,e){switch(this[T]=t,t){case j:this.commit(e),this.runEffects(_);return;case F:return this.render();case m:return this.runEffects(m)}}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(t){this.state._runEffects(t)}teardown(){this.state.teardown()}}const At=(...s)=>{const t=new CSSStyleSheet;return t.replaceSync(s.join("")),t},Lt=s=>s==null?void 0:s.map(t=>typeof t=="string"?At(t):t),Tt=(s="")=>s.replace(/-+([a-z])?/g,(t,e)=>e?e.toUpperCase():"");function Dt(s){class t extends Et{constructor(o,i,c){super(o,c||i);a(this,"frag");a(this,"renderResult");this.frag=i}commit(o){this.renderResult=s(o,this.frag)}}function e(r,n,o){const i=(o||n||{}).baseElement||HTMLElement,{observedAttributes:c=[],useShadowDOM:h=!0,shadowRootInit:y={},styleSheets:L}=o||n||{},S=Lt(r.styleSheets||L);class O extends i{constructor(){super();a(this,"_scheduler");if(h===!1)this._scheduler=new t(r,this);else{const u=this.attachShadow({mode:"open",...y});S&&(u.adoptedStyleSheets=S),this._scheduler=new t(r,u,this)}}static get observedAttributes(){return r.observedAttributes||c||[]}connectedCallback(){var u;this._scheduler.update(),(u=this._scheduler.renderResult)==null||u.setConnected(!0)}disconnectedCallback(){var u;this._scheduler.teardown(),(u=this._scheduler.renderResult)==null||u.setConnected(!1)}attributeChangedCallback(u,p,d){if(p===d)return;let yt=d===""?!0:d;Reflect.set(this,Tt(u),yt)}}function ft(f){let l=f,u=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return l},set(p){u&&l===p||(u=!0,l=p,this._scheduler&&this._scheduler.update())}})}const mt=new Proxy(i.prototype,{getPrototypeOf(f){return f},set(f,l,u,p){let d;return l in f?(d=Object.getOwnPropertyDescriptor(f,l),d&&d.set?(d.set.call(p,u),!0):(Reflect.set(f,l,u,p),!0)):(typeof l=="symbol"||l[0]==="_"?d={enumerable:!0,configurable:!0,writable:!0,value:u}:d=ft(u),Object.defineProperty(p,l,d),d.set&&d.set.call(p,u),!0)}});return Object.setPrototypeOf(O.prototype,mt),O}return e}class b{constructor(t,e){a(this,"id");a(this,"state");this.id=t,this.state=e}}function Ot(s,...t){let e=wt(),r=A[E],n=r.get(e);return n||(n=new s(e,A,...t),r.set(e,n)),n.update(...t)}function g(s){return Ot.bind(null,s)}function lt(s){return g(class extends b{constructor(e,r,n,o){super(e,r);a(this,"callback");a(this,"lastValues");a(this,"values");a(this,"_teardown");s(r,this)}update(e,r){this.callback=e,this.values=r}call(){const e=!this.values||this.hasChanged();this.lastValues=this.values,e&&this.run()}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(e){typeof this._teardown=="function"&&(this._teardown(),this._teardown=void 0),e&&(this.lastValues=this.values=void 0)}hasChanged(){return!this.lastValues||this.values.some((e,r)=>this.lastValues[r]!==e)}})}function pt(s,t){s[m].push(t)}lt(pt);const Mt=s=>s instanceof Element?s:s.startNode||s.endNode||s.parentNode,Rt=g(class extends b{constructor(t,e,r){super(t,e);a(this,"Context");a(this,"value");a(this,"_ranEffect");a(this,"_unsubscribe");this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,pt(e,this)}update(t){return this.Context!==t&&(this._subscribe(t),this.Context=t),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(t){this.value=t,this.state.update()}_subscribe(t){const e={Context:t,callback:this._updater};Mt(this.state.host).dispatchEvent(new CustomEvent(D,{detail:e,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:n=null,value:o}=e;this.value=n?o:t.defaultValue,this._unsubscribe=n}teardown(){this._unsubscribe&&this._unsubscribe()}});function Ft(s){return t=>{const e={Provider:class extends HTMLElement{constructor(){super();a(this,"listeners");a(this,"_value");this.style.display="contents",this.listeners=new Set,this.addEventListener(D,this)}disconnectedCallback(){this.removeEventListener(D,this)}handleEvent(n){const{detail:o}=n;o.Context===e&&(o.value=this.value,o.unsubscribe=this.unsubscribe.bind(this,o.callback),this.listeners.add(o.callback),n.stopPropagation())}unsubscribe(n){this.listeners.delete(n)}set value(n){this._value=n;for(let o of this.listeners)o(n)}get value(){return this._value}},Consumer:s(function({render:r}){const n=Rt(e);return r(n)},{useShadowDOM:!1}),defaultValue:t};return e}}g(class extends b{constructor(t,e,r,n){super(t,e);a(this,"value");a(this,"values");this.value=r(),this.values=n}update(t,e){return this.hasChanged(e)&&(this.values=e,this.value=t()),this.value}hasChanged(t=[]){return t.some((e,r)=>this.values[r]!==e)}});function jt(s,t){s[_].push(t)}lt(jt);g(class extends b{constructor(t,e,r){super(t,e);a(this,"args");this.updater=this.updater.bind(this),typeof r=="function"&&(r=r()),this.makeArgs(r)}update(){return this.args}updater(t){const[e]=this.args;typeof t=="function"&&(t=t(e)),!Object.is(e,t)&&(this.makeArgs(t),this.state.update())}makeArgs(t){this.args=Object.freeze([t,this.updater])}});g(class extends b{constructor(t,e,r,n,o){super(t,e);a(this,"reducer");a(this,"currentState");this.dispatch=this.dispatch.bind(this),this.currentState=o!==void 0?o(n):n}update(t){return this.reducer=t,[this.currentState,this.dispatch]}dispatch(t){this.currentState=this.reducer(this.currentState,t),this.state.update()}});const zt=/([A-Z])/gu;g(class extends b{constructor(t,e,r,n){super(t,e);a(this,"property");a(this,"eventName");if(this.state.virtual)throw new Error("Can't be used with virtual components.");this.updater=this.updater.bind(this),this.property=r,this.eventName=r.replace(zt,"-$1").toLowerCase()+"-changed",this.state.host[this.property]==null&&(typeof n=="function"&&(n=n()),n!=null&&this.updateProp(n))}update(t,e){return[this.state.host[this.property],this.updater]}updater(t){const e=this.state.host[this.property];typeof t=="function"&&(t=t(e)),!Object.is(e,t)&&this.updateProp(t)}updateProp(t){this.notify(t).defaultPrevented||(this.state.host[this.property]=t)}notify(t){const e=new CustomEvent(this.eventName,{detail:{value:t,path:this.property},cancelable:!0});return this.state.host.dispatchEvent(e),e}});function Ht({render:s}){const t=Dt(s),e=Ft(t);return{component:t,createContext:e}}const{component:Bt}=Ht({render:Pt}),Vt=(s,t=0,e=0)=>{if(!s)return;let r=s;return t>0&&s.length>t&&(r=s.slice(t)),e>0&&r.length>e&&(r=s.slice(-e)),r},H=s=>{const t=s;if(!Array.isArray(t)||t.length===0)return t;for(let e=t.length-1;e>=0;e--)if(t[e]===void 0){if(t.splice(0,e+1),t.length===0)return;break}return t},Ut=(s,t,e)=>{if(!s||t==null||e===void 0)return;if(t==="pathLocator")return H(s.getPathNodes(e));const r=s.getNodeByProperty(e,t);return H(r!=null&&r.pathLocator?s.getPathNodes(r.pathLocator):void 0)},B=({ownerTree:s,ellipsis:t,pathToRender:e,path:r,valueProperty:n,pathSeparator:o})=>{if(!e)return"";let c=e.map(h=>s.getProperty(h,n)).join(o);return e.length<r.length&&(c=t+c),c},V=({title:s,text:t})=>St`
	<style>
		:host {
			display: block;
		}

		:host([no-wrap]) {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			direction: rtl;
		}
		/* Safari only css fix */
		@media not all and (min-resolution: 0.001dpcm) {
			@supports (-webkit-appearance: none) {
				:host span {
					display: inline-block;
				}
			}
		}
	</style>
	<span title=${s}>&lrm;${t}</span>
`,Wt=({searchProperty:s="name",pathStringSeparator:t=" / ",hideFromRoot:e=0,showMaxNodes:r=0,keyProperty:n,keyValue:o,ownerTree:i,ellipsis:c="… / ",fallback:h})=>{const y=Ut(i,n,o);if(!y)return V({text:h||"",title:h||""});const L=Vt(y,e,r),S={ownerTree:i,ellipsis:c,path:y,valueProperty:s,pathSeparator:t};return V({text:B({...S,pathToRender:L}),title:B({...S,pathToRender:y})})};customElements.define("cosmoz-treenode",Bt(Wt,{observedAttributes:["key-property","key-value","search-property","path-string-separator","hide-from-root","show-max-nodes","fallback","ellipsis"]}));const It=new kt(vt),$t={title:"Components/CosmozTreenode",component:"cosmoz-treenode",tags:["autodocs"],argTypes:{keyProperty:{control:"text",description:"The property to use as key"},keyValue:{control:"text",description:"The value to look up"},searchProperty:{control:"text",description:"The property to display (default: name)"},pathStringSeparator:{control:"text",description:'Separator between path parts (default: " / ")'},hideFromRoot:{control:"number",description:"Number of nodes to hide from the root"},showMaxNodes:{control:"number",description:"Maximum number of nodes to show"},ellipsis:{control:"text",description:"Ellipsis to show when path is shortened"},fallback:{control:"text",description:"Text to show when path cannot be found"},noWrap:{control:"boolean",description:"No text wrapping"}}},P=s=>{const t=document.createElement("cosmoz-treenode");return s.keyProperty&&t.setAttribute("key-property",s.keyProperty),s.keyValue&&t.setAttribute("key-value",s.keyValue),s.searchProperty&&t.setAttribute("search-property",s.searchProperty),s.pathStringSeparator&&t.setAttribute("path-string-separator",s.pathStringSeparator),s.hideFromRoot&&t.setAttribute("hide-from-root",s.hideFromRoot),s.showMaxNodes&&t.setAttribute("show-max-nodes",s.showMaxNodes),s.ellipsis&&t.setAttribute("ellipsis",s.ellipsis),s.fallback&&t.setAttribute("fallback",s.fallback),s.noWrap&&t.setAttribute("no-wrap",""),t.ownerTree=It,t},k={render:P,args:{keyProperty:"id",keyValue:"f7a21733-0e65-4985-9e40-a4fb00f3124f",searchProperty:"name",pathStringSeparator:" / "}},v={render:P,args:{keyProperty:"id",keyValue:"fc78989a-d213-496c-80db-a4fb00f31252",searchProperty:"name"}},w={render:P,args:{keyProperty:"id",keyValue:"fc78989a-d213-496c-80db-a4fb00f31252",hideFromRoot:2}},N={render:P,args:{keyProperty:"id",keyValue:"f7a21733-0e65-4985-9e40-a4fb00f3124f",showMaxNodes:2}},x={render:P,args:{keyProperty:"id",keyValue:"fc78989a-d213-496c-80db-a4fb00f31252",pathStringSeparator:"##"}},C={render:P,args:{keyProperty:"id",keyValue:"f7a21733-0e65-4985-9e40-a4fb00f3124f",noWrap:!0}};var Y,$,K;k.parameters={...k.parameters,docs:{...(Y=k.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'f7a21733-0e65-4985-9e40-a4fb00f3124f',
    searchProperty: 'name',
    pathStringSeparator: ' / '
  }
}`,...(K=($=k.parameters)==null?void 0:$.docs)==null?void 0:K.source}}};var Z,q,G;v.parameters={...v.parameters,docs:{...(Z=v.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'fc78989a-d213-496c-80db-a4fb00f31252',
    searchProperty: 'name'
  }
}`,...(G=(q=v.parameters)==null?void 0:q.docs)==null?void 0:G.source}}};var J,X,tt;w.parameters={...w.parameters,docs:{...(J=w.parameters)==null?void 0:J.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'fc78989a-d213-496c-80db-a4fb00f31252',
    hideFromRoot: 2
  }
}`,...(tt=(X=w.parameters)==null?void 0:X.docs)==null?void 0:tt.source}}};var et,rt,st;N.parameters={...N.parameters,docs:{...(et=N.parameters)==null?void 0:et.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'f7a21733-0e65-4985-9e40-a4fb00f3124f',
    showMaxNodes: 2
  }
}`,...(st=(rt=N.parameters)==null?void 0:rt.docs)==null?void 0:st.source}}};var nt,ot,at;x.parameters={...x.parameters,docs:{...(nt=x.parameters)==null?void 0:nt.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'fc78989a-d213-496c-80db-a4fb00f31252',
    pathStringSeparator: '##'
  }
}`,...(at=(ot=x.parameters)==null?void 0:ot.docs)==null?void 0:at.source}}};var it,ct,ut;C.parameters={...C.parameters,docs:{...(it=C.parameters)==null?void 0:it.docs,source:{originalSource:`{
  render: Template,
  args: {
    keyProperty: 'id',
    keyValue: 'f7a21733-0e65-4985-9e40-a4fb00f3124f',
    noWrap: true
  }
}`,...(ut=(ct=C.parameters)==null?void 0:ct.docs)==null?void 0:ut.source}}};const Kt=["DisplayNodeYamahaNippon","DisplayNodeMitsubishiHeavyIndustries","HideFromRoot","ShowMaxNodes","AlternateSeparator","NoWrap"];export{x as AlternateSeparator,v as DisplayNodeMitsubishiHeavyIndustries,k as DisplayNodeYamahaNippon,w as HideFromRoot,C as NoWrap,N as ShowMaxNodes,Kt as __namedExportsOrder,$t as default};
